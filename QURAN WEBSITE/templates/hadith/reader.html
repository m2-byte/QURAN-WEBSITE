{% extends "base.html" %}

{% block content %}
<div class="header-spacer"></div>

<div class="container-narrow py-4">
    <nav class="breadcrumb">
        <a href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <span class="separator">/</span>
        <a href="/hadith">Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠÙ</a>
        <span class="separator">/</span>
        <a href="/hadith/{{ collection.id }}">{{ collection.name }}</a>
        <span class="separator">/</span>
        <span class="current">{{ section_name }}</span>
    </nav>

    <div class="section-header text-center mb-5">
        <h1 class="gradient-text">{{ section_name }}</h1>
        <p class="text-secondary">{{ collection.name }}</p>
    </div>

    <div class="hadith-list">
        {% for hadith in hadiths %}
        <div class="card hadith-card mb-3" id="h{{ hadith.hadithnumber }}">
            <div class="hadith-meta">
                <span class="hadith-num">Ø­Ø¯ÙŠØ« #{{ hadith.hadithnumber }}</span>
                <div class="hadith-actions">
                    <button class="btn-icon" onclick="copyText(this)" title="Ù†Ø³Ø® Ø§Ù„Ø­Ø¯ÙŠØ«">ğŸ“‹</button>
                    <button class="btn-icon" onclick="shareHadith('{{ hadith.hadithnumber }}')"
                        title="Ù…Ø´Ø§Ø±ÙƒØ©">ğŸ“¤</button>
                </div>
            </div>

            <div class="hadith-content">
                <p class="hadith-text">{{ hadith.text }}</p>
            </div>

            {% if hadith.grades %}
            <div class="hadith-footer">
                {% for grade in hadith.grades %}
                <span class="badge badge-sahih">{{ grade.grade }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <!-- Next/Prev Navigation would go here in a full implementation -->
</div>

<style>
    .hadith-card {
        padding: 2rem;
        position: relative;
    }

    .hadith-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border-color);
    }

    .hadith-num {
        font-weight: 700;
        color: var(--primary-600);
        background: var(--primary-50);
        padding: 0.25rem 0.75rem;
        border-radius: 6px;
        font-size: 0.9rem;
    }

    .hadith-text {
        font-family: 'Amiri', serif;
        font-size: 1.6rem;
        line-height: 2.4;
        color: var(--text-primary);
        text-align: justify;
        margin-bottom: 1rem;
    }

    .hadith-footer {
        margin-top: 1.5rem;
        display: flex;
        gap: 0.5rem;
    }

    .btn-icon {
        background: transparent;
        border: none;
        color: var(--text-tertiary);
        cursor: pointer;
        font-size: 1.1rem;
        padding: 0.4rem;
        border-radius: 6px;
        transition: all 0.2s;
    }

    .btn-icon:hover {
        background: var(--bg-tertiary);
        color: var(--primary-600);
    }
</style>

<script>
    function copyText(btn) {
        const card = btn.closest('.hadith-card');
        const text = card.querySelector('.hadith-text').textContent;
        navigator.clipboard.writeText(text).then(() => {
            const original = btn.textContent;
            btn.textContent = 'âœ…';
            setTimeout(() => btn.textContent = original, 2000);
        });
    }

    function shareHadith(num) {
        if (navigator.share) {
            navigator.share({
                title: 'Ø­Ø¯ÙŠØ« Ù†Ø¨ÙˆÙŠ',
                text: document.querySelector(`#h${num} .hadith-text`).textContent,
                url: window.location.href
            });
        }
    }
</script>
{% endblock %}