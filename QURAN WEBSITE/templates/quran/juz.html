{% extends "base.html" %}

{% block content %}
<div class="juz-page">
    <!-- Header -->
    <div class="page-header">
        <div class="container">
            <h1>Ø§Ù„Ø¬Ø²Ø¡ {{ juz_id }}</h1>
            <p style="opacity:0.8;">Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ø³ØªÙ…Ø§Ø¹ Ø¢ÙŠØ§Øª Ø§Ù„Ø¬Ø²Ø¡ {{ juz_id }} ÙƒØ§Ù…Ù„Ø©</p>

            <div class="juz-nav">
                {% if juz_id > 1 %}
                <a href="/quran/juz/{{ juz_id - 1 }}" class="btn btn-secondary btn-sm">
                    <span class="icon">â¡ï¸</span> Ø§Ù„Ø³Ø§Ø¨Ù‚
                </a>
                {% else %}
                <span></span>
                {% endif %}

                <span class="current-juz">Ø§Ù„Ø¬Ø²Ø¡ {{ juz_id }}</span>

                {% if juz_id < 30 %} <a href="/quran/juz/{{ juz_id + 1 }}" class="btn btn-secondary btn-sm">
                    Ø§Ù„ØªØ§Ù„ÙŠ <span class="icon">â¬…ï¸</span>
                    </a>
                    {% endif %}
            </div>
        </div>
    </div>

    <div class="container py-4">
        {% for surah_num in surah_order %}
        {% set surah = grouped_verses[surah_num] %}

        <div class="surah-section mb-5">
            <div class="surah-header-card">
                <div class="surah-title">
                    <span class="surah-number">{{ surah.number }}</span>
                    <h2>{{ surah.name }}</h2>
                    <span class="surah-en">{{ surah.englishName }}</span>
                </div>
                <a href="/quran/{{ surah.number }}" class="btn btn-outline btn-sm">
                    Ø§Ù‚Ø±Ø£ Ø§Ù„Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©
                </a>
            </div>

            <div class="verses-list">
                {% for verse in surah.verses %}
                <div class="verse-card" id="verse-{{ verse.global_number }}" data-audio="{{ verse.audio }}"
                    onclick="playAudio('{{ verse.audio }}', '{{ surah.name }} - Ø¢ÙŠØ© {{ verse.number }}', '{{ surah.englishName }}')">

                    <div class="verse-actions">
                        <button class="action-btn play-verse-btn"
                            onclick="event.stopPropagation(); playAudio('{{ verse.audio }}', '{{ surah.name }} - Ø¢ÙŠØ© {{ verse.number }}', '{{ surah.englishName }}')">
                            â–¶
                        </button>
                        <button class="action-btn"
                            onclick="event.stopPropagation(); copyText('{{ verse.text }}')">ğŸ“‹</button>
                    </div>

                    <div class="verse-text">{{ verse.text }}
                        <span class="ayah-end">Û{{ verse.number }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .juz-nav {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-top: 1rem;
        background: var(--bg-secondary);
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
        backdrop-filter: blur(10px);
        border: 1px solid var(--border-color);
    }

    .current-juz {
        font-weight: 800;
        color: var(--primary-500);
    }

    .surah-header-card {
        background: linear-gradient(135deg, var(--primary-600), var(--primary-800));
        color: white;
        padding: 1.5rem;
        border-radius: 16px;
        margin-bottom: 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 10px 30px rgba(var(--primary-rgb), 0.3);
    }

    .surah-header-card h2 {
        margin: 0;
        font-size: 1.8rem;
        font-family: 'Amiri', serif;
    }

    .surah-number {
        background: rgba(255, 255, 255, 0.2);
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        font-weight: bold;
        margin-left: 1rem;
    }

    .surah-title {
        display: flex;
        align-items: center;
    }

    .surah-en {
        margin-right: 1rem;
        opacity: 0.8;
        font-size: 0.9rem;
    }
</style>

<script>
    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => {
            if (typeof showToast === 'function') showToast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ©');
        });
    }
</script>
{% endblock %}